{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<div
  id="{{ section.id }}"
  class="section-{{ section.id }}-padding"
  style="background-color: {{ section.settings.background_color }}">
  <div class="page-width">
    <div class="grid md:grid-cols-2 items-center gap-8">
      {% if section.settings.statistic_image != blank %}
        <img
          src="{{ section.settings.statistic_image | image_url }}"
          alt="statistic_image"
          class="w-full h-auto"
          height="500"
          width="500">
      {% endif %}
      <div>
        <h2 class="text-3xl md:text-3xl font-black tracking-tight leading-snug text-center mt-0">
          {{ section.settings.heading }}
        </h2>
        {% assign circumference = 251.2 %}
        {% for block in section.blocks %}
          {% assign fill = circumference | times: block.settings.percentage | divided_by: 100 %}
          {% assign offset = circumference | minus: fill %}
          <div class="m-0 items-center flex gap-2 md:gap-6 border-0 border-b border-solid border-gray-200 pb-4 mb-4 last:pb-0 last:mb-0 last:border-none">
            <div class="relative w-24 h-24 flex-shrink-0">
              <svg class="w-full h-full transform -rotate-90" viewBox="0 0 100 100">
                <circle
                  class="text-gray-200"
                  stroke-width="4"
                  stroke="currentColor"
                  fill="transparent"
                  r="40"
                  cx="50"
                  cy="50" />
                <circle
                  class="text-green-700"
                  stroke-width="4"
                  stroke="currentColor"
                  fill="transparent"
                  r="40"
                  cx="50"
                  cy="50"
                  stroke-dasharray="{{ circumference }}"
                  stroke-dashoffset="{{ offset }}"
                  stroke-linecap="round" />
              </svg>
              <span class="absolute inset-0 flex items-center justify-center text-2xl font-bold text-green-700">
                {{ block.settings.percentage }}%
              </span>
            </div>

            <p class="text-sm md:text-base uppercase font-semibold text-[#121212] flex-1">
              {{ block.settings.text }}
            </p>
          </div>
        {% endfor %}
      </div>
    </div>
    {% if section.settings.disclaimer != blank %}
      <p class="text-sm text-gray-500 text-center mt-8">
        {{ section.settings.disclaimer }}
      </p>
    {% endif %}
  </div>
</div>
{% schema %}
  {
    "name": "TryScent Statistics",
    "settings": [
      {
        "type": "color",
        "id": "background_color",
        "label": "Background Color",
        "default": "#FAF9F6"
      },
      {
        "type": "image_picker",
        "id": "statistic_image",
        "label": "Statistic Image"
      },
      {
        "type": "text",
        "id": "heading",
        "label": "Section Heading",
        "default": "10,000+ TryScent Bottles Shipped Worldwide"
      },
      {
        "type": "text",
        "id": "disclaimer",
        "label": "Disclaimer Text",
        "default": "*RESULTS BASED ON 1,000+ POST-PURCHASE SURVEYS"
      }, {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "t:sections.all.padding.padding_top",
        "default": 12
      }, {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "t:sections.all.padding.padding_bottom",
        "default": 72
      }
    ],
    "blocks": [
      {
        "type": "stat",
        "name": "Statistic Item",
        "settings": [
          {
            "type": "number",
            "id": "percentage",
            "label": "Percentage",
            "default": 99
          }, {
            "type": "textarea",
            "id": "text",
            "label": "Statistic Description",
            "default": "Said TryScent smells just like the designer fragrance, without the high designer price."
          }
        ]
      }
    ],
    "presets": [
      {
        "name": "TryScent Statistics",
        "category": "Info"
      }
    ]
  }
{% endschema %}